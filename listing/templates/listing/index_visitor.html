{% extends 'listing/base_visitor.html' %}

{% block body %}
<div class="infinite-container container-fluid">

    <!-- Items -->
    <div class="row">
        {% if items %}
            {% for item in items %}
                <div class="col-sm-4 col-lg-2 infinite-item">
                    <div class="thumbnail" style="padding:0px;">
                        <div class="image">
                            <a href="{% url 'listing:detail' item.id %}">
                                {% if item.photo_width < item.photo_height %}
                                    <img src="{{ item.photo.url }}" class="img-responsive portrait">
                                {% else %}
                                    <img src="{{ item.photo.url }}" class="img-responsive landscape">
                                {% endif %}
                            </a>
                        </div>
                        <div class="caption">
                            <h3>{{ item.item_name }}</h3>
                            <h5>{{ item.city }}</h5>
                        </div>
                    </div>
                </div>
                {% cycle '' '' '' '' '' '<div class="clearfix visible-lg"></div>' %}
            {% endfor %}
        {% endif %}
    </div>

</div>

    {% if items.has_next %}
        <a class="infinite-more-link" href="?page={{ items.next_page_number }}"></a>
    {% endif %}

    <script>
        var infinite = new Waypoint.Infinite({
            element: $('.infinite-container')[0]
        });
    </script>

{% endblock %}
